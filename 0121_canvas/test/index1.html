<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        canvas {
            display: block;
            margin: 0 auto;
            box-shadow: 0 0 20px grey;
        }
    </style>
</head>
<body>
<canvas id="mc" width="1000" height="600"></canvas>
<script>
    //获取画布
    var mc = document.getElementById('mc');
    //获取画笔
    var ctx = mc.getContext('2d');

    var ballArr = []; //所有小球的承接数组

    //随机数函数
    function rn(max, min) {
        return Math.round(Math.random()* (max - min) + min);
    }

    //封装一个小球类
    function Ball(x, y, r, vx, vy, bg) {
        this.x = x;
        this.y = y;
        this.r = r;
        this.vx = vx;
        this.vy = vy;
        this.bg = bg;
    }
    Ball.prototype.move = function () {
        //改变圆心的位置
        this.x += this.vx;
        this.y += this.vy;

        //绘制
        ctx.beginPath();
        ctx.fillStyle = this.bg;
        ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
        ctx.fill();
        //跟据x和y判断碰壁反弹
        if (this.x < this.r || this.x > 1000 - this.r) this.vx *= -1;
        if (this.y < this.r || this.y > 600 - this.r) this.vy *= -1;
    };
    //批量生成小球
    function getball() {
        for (var i = 0; i < 200; i++) {
            var r = rn(3, 5); //半径
            var x = rn(r, 1000 - r);
            var y = rn(r, 600 - r);
            var vx = rn(-5, 5);
            vx = vx == 0 ? -1 : vx; //规避vx为0 的情况
            var vy = rn(-5, 5);
            vy = vy == 0 ? 1 : vy; //规避vy为0 的情况
            var bg = 'rgba('+rn(0, 255)+','+rn(0, 255)+','+rn(0, 255)+','+Math.random()+')';
            var ball = new  Ball(x, y, r, vx, vy, bg);
            ballArr.push(ball);
        }
    }
    getball();

    //不停绘制
    function draw() {
        ctx.clearRect(0, 0, 1000, 600); //清除画布
        //调用所有小球move函数
        for (var i in ballArr) {
            ballArr[i].move();
        }
        requestAnimationFrame(draw);
    }
    draw();


</script>
</body>
</html>



















<!---->